---

- name: wan
  hosts: gateway
  connection: ssh
  gather_facts: false
  become: false
  tasks:
    - name: include octodns role (wan tasks)
      ansible.builtin.include_role:
        name: octodns
        tasks_from: wan.yml
        apply:
          tags: wan
      tags: always

- name: octodns
  hosts: localhost
  connection: local
  gather_facts: false
  become: false
  tasks:
    - name: include octodns role (main tasks)
      ansible.builtin.include_role:
        name: octodns
        tasks_from: main.yml
      vars:
        doit: false
      tags: always

- name: test
  hosts: localhost
  connection: local
  gather_facts: false
  become: false
  tasks:
    - name: include octodns role (test tasks)
      ansible.builtin.include_role:
        name: octodns
        tasks_from: test.yml
      vars:
        domains:
          - cloudmason.org
          - letsbuildthe.cloud
          - digitalocean.com
          - github.com
          - google.com
        nameservers:
          - 192.168.1.10
          - 192.168.1.11
        combinations: "{{ domains | product(nameservers) }}"
      tags: always
